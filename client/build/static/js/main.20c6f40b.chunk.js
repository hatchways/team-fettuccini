(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{123:function(e,t,a){e.exports=a(173)},170:function(e,t){},173:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),s=a.n(o),i=(a(88),a(37)),c=a(229),l=a(46),m=a(38),u=a(8),d=a(175),p=a(218),h=a(219),f=a(115),g=a(221),b=a(176),y=a(217),v=a(215),x=a(216),w=function(e,t){for(var a in console.log("user ",e),e)window.sessionStorage.setItem(a,e[a]);window.sessionStorage.setItem("token",!0),t()},E=function(e){window.sessionStorage.clear(),e()},I=function(){return window.sessionStorage.hasOwnProperty("token")},S=function(){return{id:window.sessionStorage.getItem("_id"),name:window.sessionStorage.getItem("username"),email:window.sessionStorage.getItem("email")}},O=a(213),j="#1E90FF",k="#FA8072",C=Object(O.a)((function(e){return{blue:{color:j,fontSize:"25px",fontWeight:"600",fontFamily:"Roboto"},waitingroomHeader:{display:"flex",flexWrap:"wrap-reverse",justifyContent:"space-between",backgroundColor:"white",textAlign:"center",fontSize:"30px"},basicHeader:{display:"flex",flexWrap:"wrap-reverse",justifyContent:"space-between",textAlign:"center",marginLeft:"auto",marginRight:"auto",fontSize:"30px"},gameHeader:{display:"flex",flexWrap:"wrap-reverse",justifyContent:"space-between",textAlign:"center",marginLeft:"auto",marginRight:"auto",width:"150px"},invisible:{opacity:"0","&:hover":{cursor:"default"}},navSides:{flexGrow:"1"},navMain:{flexGrow:"1",fontFamily:"Roboto",fontWeight:"bold",backgroundColor:"white",color:"#000000","&>.MuiToolbar-root":Object(u.a)({display:"flex",justifyContent:"space-between"},e.breakpoints.down("xs"),{flexWrap:"wrap"})},red:{color:k,fontSize:"25px",fontWeight:"600",fontFamily:"Roboto"},bar:{fontSize:"25px",fontWeight:"bold"},typography:{fontSize:"25px"},myprofile:{marginLeft:e.spacing(40)}}}));function N(e){var t=Object(m.g)(),a=C(e),o=r.a.useState(!1),s=Object(i.a)(o,2),c=s[0],l=s[1],u=I()&&e.isMatchInProgres?a.typography:a.basicHeader;return r.a.createElement(v.a,{position:"sticky",className:a.navMain},r.a.createElement(x.a,null,r.a.createElement(d.a,{variant:"typography",className:u},"CLUEWORDS"),I()?r.a.createElement(n.Fragment,null,e.isMatchInProgres?r.a.createElement(n.Fragment,null,r.a.createElement(y.a,{container:!0,direction:"row",className:a.gameHeader},r.a.createElement(y.a,{item:!0,direction:"column",className:a.waitingroomHeader},r.a.createElement(y.a,{item:!0},r.a.createElement("span",{className:a.blue},e.blueScore)),r.a.createElement(y.a,{item:!0},r.a.createElement("span",{className:a.blue,style:{fontSize:"10px"}},"Blue Team"))),r.a.createElement(y.a,{item:!0,className:a.waitingroomHeader},"-"),r.a.createElement(y.a,{item:!0,direction:"column",className:a.waitingroomHeader},r.a.createElement(y.a,{item:!0},r.a.createElement("span",{className:a.red},e.redScore)),r.a.createElement(y.a,{item:!0},r.a.createElement("span",{className:a.red,style:{fontSize:"10px"}},"Red Team")))),r.a.createElement("div",null,r.a.createElement(p.a,{className:a.navSides,variant:"contained",color:"primary",onClick:function(){e.setIsMatchInProgres(!1),t.push("/welcome")}},"New game"))):null,r.a.createElement("div",null,r.a.createElement(b.a,null,r.a.createElement(h.a,{alt:"demo_picture",src:"/profile_icon.jpg"}),r.a.createElement(p.a,{onClick:function(e){l(e.currentTarget)},style:{fontFamily:"Roboto"}},"My profile"))),r.a.createElement(f.a,{id:"menu",anchorEl:c,keepMounted:!0,open:Boolean(c),onClose:function(){l(!1)}},r.a.createElement(g.a,{style:{fontFamily:"Roboto"},onClick:function(){E((function(){t.push("/"),l(!1),e.setIsMatchInProgres(!1)}))}},"Signout"))):null))}var P=a(4),R=a(117),M=a(18),T=a(19),F=a(14),A=a(20),B=a(21),D=a(222),W=a(223),H=a(226),L=function(e){return{form:{display:"flex",flexDirection:"column",maxWidth:"300px",margin:"0 auto"},formWarning:{color:"#ff0000"}}},G=Object(P.a)(L)(function(e){Object(B.a)(a,e);var t=Object(A.a)(a);function a(e){var n;return Object(M.a)(this,a),(n=t.call(this,e)).state={email:"",password:"",error:""},n.handleSubmit=n.handleSubmit.bind(Object(F.a)(n)),n.handleChange=n.handleChange.bind(Object(F.a)(n)),n}return Object(T.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a={method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({email:this.state.email,password:this.state.password})};fetch("/users/login",a).then((function(e){if(200===e.status)return e.json();console.error("API error /users/login ",e)})).then((function(e){t.props.login(e.user)})).catch((function(e){console.log(e.message)}))}},{key:"render",value:function(){var e=this.props.classes,t=0!==this.state.error.length?r.a.createElement("p",{className:e.formWarning},this.state.error):null;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:e.form,onSubmit:this.handleSubmit},r.a.createElement(D.a,{className:"inputBlock"},r.a.createElement(W.a,{htmlFor:"email"},"Email:"),r.a.createElement(H.a,{variant:"outlined",id:"email",name:"email",type:"email",value:this.state.email,onChange:this.handleChange,placeholder:"johndoe@gmail.com",required:!0})),r.a.createElement(D.a,{className:"inputBlock"},r.a.createElement(W.a,{htmlFor:"password"},"Password:"),r.a.createElement(H.a,{variant:"outlined",id:"password",name:"password",type:"password",value:this.state.password,onChange:this.handleChange,placeholder:"Password",required:!0})),t,r.a.createElement("div",null,r.a.createElement(p.a,{variant:"contained",color:"primary",type:"submit"},"Sign In"))))}}]),a}(n.Component)),z=a(17),q=Object(P.a)(L)(function(e){Object(B.a)(a,e);var t=Object(A.a)(a);function a(e){var n;return Object(M.a)(this,a),(n=t.call(this,e)).state={name:"",email:"",password:"",passwordConfirm:"",error:""},n.handleSubmit=n.handleSubmit.bind(Object(F.a)(n)),n.handleChange=n.handleChange.bind(Object(F.a)(n)),n.handleConfirmPassword=n.handleConfirmPassword.bind(Object(F.a)(n)),n}return Object(T.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(z.a)({},this.state,Object(u.a)({},e.target.name,e.target.value)))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a="";if(this.state.password!==this.state.passwordConfirm)return a="Passwords must match",void this.setState(Object(z.a)({},this.state,{error:a}));if(this.state.password.length<6)return a="Password must be at least 6 characters long",void this.setState(Object(z.a)({},this.state,{error:a}));var n={method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:JSON.stringify({username:this.state.name,email:this.state.email,password:this.state.password})};fetch("/users",n).then((function(e){if(201===e.status)return e.json();console.log(e.message)})).then((function(e){t.props.login(e.user)})).catch((function(e){console.log(e.message)}))}},{key:"handleConfirmPassword",value:function(e){var t,a=this.state.password!==e.target.value?"Passwords must match":"";this.setState(Object(z.a)({},this.state,(t={},Object(u.a)(t,e.target.name,e.target.value),Object(u.a)(t,"error",a),t)))}},{key:"render",value:function(){var e=this.props.classes,t=0!==this.state.error.length?r.a.createElement("p",{className:e.formWarning},this.state.error):null;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:e.form,onSubmit:this.handleSubmit},r.a.createElement(D.a,null,r.a.createElement(W.a,{htmlFor:"name"},"Name:"),r.a.createElement(H.a,{variant:"outlined",id:"name",name:"name",type:"text",value:this.state.name,onChange:this.handleChange,placeholder:"Enter your Name",required:!0})),r.a.createElement(D.a,null,r.a.createElement(W.a,{htmlFor:"email"},"Email:"),r.a.createElement(H.a,{variant:"outlined",name:"email",id:"email",type:"email",value:this.state.email,onChange:this.handleChange,placeholder:"Enter your Email",required:!0})),r.a.createElement(D.a,null,r.a.createElement(W.a,{htmlFor:"password"},"Password:"),r.a.createElement(H.a,{variant:"outlined",id:"password",name:"password",type:"password",minLength:"6",value:this.state.password,onChange:this.handleChange,placeholder:"Enter Password",required:!0})),r.a.createElement(D.a,null,r.a.createElement(W.a,{htmlFor:"passwordConfirm"},"Confirm Password:"),r.a.createElement(H.a,{variant:"outlined",id:"passwordConfirm",name:"passwordConfirm",type:"password",minLength:"6",value:this.state.passwordConfirm,onChange:this.handleConfirmPassword,placeholder:"Enter Password Again",required:!0})),t,r.a.createElement("div",null,r.a.createElement(p.a,{variant:"contained",color:"primary",type:"submit"},"Sign Up"))))}}]),a}(n.Component));var _=Object(P.a)((function(e){return{landingContainer:{margin:e.spacing(2)}}}))((function(e){var t=Object(n.useState)(!e.hasOwnProperty("signIn")||e.signIn),a=Object(i.a)(t,2),o=a[0],s=a[1],c=o?"Don't":"Already",l=Object(m.g)(),u=(Object(m.h)().state||{from:{pathname:"/"}}).from,p=function(e){w(e,(function(){l.replace(u)}))};return I()?r.a.createElement(m.a,{to:"/welcome"}):r.a.createElement(R.a,{className:"MuiPaper-customPrimary"},r.a.createElement(d.a,{variant:"h4"},o?"Sign In":"Sign Up"),o?r.a.createElement(G,{login:p}):r.a.createElement(q,{login:p}),r.a.createElement(d.a,{variant:"body1"},c," have an account? \xa0"),o?r.a.createElement(d.a,{variant:"h6",onClick:function(){return s(!o)}},"Sign Up"):r.a.createElement(d.a,{variant:"h6",onClick:function(){return s(!o)}},"Sign In"))})),J=a(116);function U(e){var t=e.children,a=Object(J.a)(e,["children"]);return I()?r.a.createElement(m.b,a,t):r.a.createElement(m.a,{to:{pathname:"/"}})}var Y=a(12),V=a.n(Y),$=a(23),K=a(70),X=a.n(K),Q=a(220),Z=a(113),ee=a.n(Z),te=a(111),ae=a.n(te),ne=a(112),re=a.n(ne),oe=a(110),se=a.n(oe),ie=function(e){var t;return t={flexCol:{display:"flex",flexDirection:"column",alignItems:"center","&>button":{margin:"5% auto"}},availableRoles:{maxWidth:"160px",margin:"0 auto"},listItem:{justifyContent:"center",textAlign:"center"},itemText:{flex:"unset"},iconHover:{"&:hover":{cursor:"pointer",opacity:"0.8"}},verticalAlign:{alignItems:"center",display:"flex",justifyContent:"space-around"},centerText:{textAlign:"center",marginBottom:"0.5em"},leftText:{textAlign:"left"},gridContainer:{flexWrap:"wrap-reverse",justifyContent:"space-around",margin:"10px auto"},standardFlex:{display:"flex",flexWrap:"wrap"},standardFlexChild:{flexGrow:"1"},mainFill:{fill:e.palette.primary.main},rotate45:{transform:"rotate(-45deg)",margin:"1px"},outlined:{border:"1px solid ".concat(e.palette.common.gray),borderRadius:"12px","&>.MuiInputBase-root":{"&>.MuiInputBase-input":{textAlign:"center"}}},darkGray:{backgroundColor:e.palette.common.darkGray,color:e.palette.primary.contrastText},hiddenText:{opacity:"0",position:"absolute"}},Object(u.a)(t,e.breakpoints.up("md"),{borderLeft:{position:"relative","&:before":{content:"close-quote",height:"100%",width:"2px",position:"absolute",backgroundColor:e.palette.common.gray,left:"-14px",top:"60%",transform:"translateY(-50%)"}}}),Object(u.a)(t,e.breakpoints.down("xs"),{centerMobile:{textAlign:"center"}}),t},ce=function(){var e=Object($.a)(V.a.mark((function e(t){var a,n,r,o;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,n=t.method,r=t.body,e.prev=1,e.next=4,fetch(a,{method:n,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},body:"POST"===n?JSON.stringify(r):null});case 4:if(200===(o=e.sent).status){e.next=11;break}return e.next=8,o.text();case 8:return o=e.sent,console.error("failed request :: ",o),e.abrupt("return",{error:o});case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.log("error @ ".concat(a," raw \n"),e.t0);case 16:return e.prev=16,e.next=19,o.json();case 19:o=e.sent,e.next=25;break;case 22:e.prev=22,e.t1=e.catch(16),console.log("error @ ".concat(a," .json() \n"),e.t1);case 25:return e.abrupt("return",o);case 26:case"end":return e.stop()}}),e,null,[[1,13],[16,22]])})));return function(t){return e.apply(this,arguments)}}(),le={RS:"Red Spy Master",RF:"Red Field Agent",BS:"Blue Spy Master",BF:"Blue Field Agent"},me=function(e){Object(B.a)(a,e);var t=Object(A.a)(a);function a(e){var n;return Object(M.a)(this,a),(n=t.call(this,e)).componentWillUnmount=Object($.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.socket.disconnect(!0);case 1:case"end":return e.stop()}}),e)}))),n.componentDidMount=function(){var e=S().id,t=S().name,a=n.props.match.params.matchId;n.setState(Object(z.a)({},n.state,{matchId:a,name:t,userId:e}),(function(){n.socket.on("changePosition",n.updatePositions),n.socket.emit("changePosition",{matchID:n.state.matchId,userID:n.state.userId,name:n.state.name,position:"",action:"joinmatch"})}))},n.copyLink=function(){n.textArea.value=n.state.matchId,n.textArea.select(),document.execCommand("copy")},n.startMatch=function(){var e=n.state,t=e.matchId,a=e.matchState,r=e.positions;n.props.history.push({pathname:"/match/".concat(t),state:{matchId:t,matchState:a,positions:r}})},n.updatePositions=function(e){console.log("in update positions"),console.log(e);var t=e.info,a=n.state,r=(a.userId,a.matchId,a.positions);a.name;for(var o in le)t.hasOwnProperty(o)?""===t[o].id||0==Object.keys(t[o]).length?r.hasOwnProperty(o)&&delete r[o]:r.hasOwnProperty(o)?r[o].userId!==t[o].id&&(r[o]={userId:t[o].id,name:t[o].name}):r[o]={role:le[o],userId:t[o].id,name:t[o].name}:r.hasOwnProperty(o)&&delete r[o];console.log(r),n.setState(Object(z.a)({},n.state,{positions:r,matchState:e}))},n.state={userId:"",name:"",matchId:"",positions:{},matchState:{}},n.ping=n.ping.bind(Object(F.a)(n)),n.changePosition=n.changePosition.bind(Object(F.a)(n)),n.socket=X()("http://localhost:3001"),n}return Object(T.a)(a,[{key:"ping",value:function(){var e=Object($.a)(V.a.mark((function e(){var t,a,n,r,o,s,i,c;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.userId,n=t.matchId,r=t.positions,o=t.matchState,i=!1,e.prev=2,e.next=5,ce({url:"/matches/".concat(n,"/nextmove"),method:"POST",body:{userID:a,position:"_PING",move:"_PING"}});case 5:s=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log("error @ PING .json() \n",e.t0);case 11:for(c in console.log("res ping ",s),i=o.state!==s.state&&void 0!=s.state,le)s.hasOwnProperty(c)?""===s[c].id||0==Object.keys(s[c]).length?r.hasOwnProperty(c)&&(delete r[c],i=!0):r.hasOwnProperty(c)?r[c].userId!==s[c].id&&(r[c]={userId:s[c].id,name:s[c].name},i=!0):(r[c]={role:le[c],userId:s[c].id,name:s[c].name},i=!0):r.hasOwnProperty(c)&&(delete r[c],i=!0);i&&this.setState(Object(z.a)({},this.state,{positions:r,matchState:s}));case 15:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"changePosition",value:function(){var e=Object($.a)(V.a.mark((function e(t){var a,n,r,o,s,i;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=this.state,n=a.userId,r=a.matchId,a.positions,o=a.name,s=t.currentTarget.dataset.id.slice(0,2),i=t.currentTarget.dataset.id.slice(2),this.socket.emit("changePosition",{matchID:r,userID:n,name:o,position:s,action:i});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.positions,o=t.userId,s=this.props.classes;4===Object.keys(a).length&&this.startMatch();var i=Object.keys(le).filter((function(e){return!a.hasOwnProperty(e)})).map((function(t,a){return r.a.createElement(b.a,{key:"openRole-".concat(a),className:s.listItem},r.a.createElement(d.a,{variant:"body1"},le[t],"\xa0\xa0"),r.a.createElement(se.a,{className:s.iconHover,"data-id":"".concat(t,"joinmatch"),onClick:e.changePosition}))})),c=Object.keys(a).map((function(t,n){return r.a.createElement(b.a,{key:"invite".concat(n),className:s.verticalAlign},r.a.createElement(ae.a,{className:s.mainFill}),r.a.createElement(d.a,{variant:"body1"},a[t].name," -\xa0",a[t].role,a[t].userId===o?" (You)":null," \xa0\xa0"),r.a.createElement(re.a,{className:s.iconHover,"data-id":"".concat(t,"leavematch"),onClick:e.changePosition}))}));return r.a.createElement(n.Fragment,null,r.a.createElement(R.a,{className:"MuiPaper-customPrimary"},r.a.createElement(d.a,{variant:"h4"},"New Game"),document.queryCommandSupported("copy")&&r.a.createElement("textarea",{readOnly:!0,ref:function(t){return e.textArea=t},className:s.hiddenText,value:this.state.matchId}),r.a.createElement(Q.a,{className:s.availableRoles},r.a.createElement(d.a,{variant:"h5"},"Available roles"),i),r.a.createElement(y.a,{container:!0,className:s.gridContainer},r.a.createElement(y.a,{item:!0},r.a.createElement(W.a,null,"Players ready for match:"),r.a.createElement(Q.a,{className:s.leftText},c)),r.a.createElement(y.a,{item:!0,className:s.borderLeft},r.a.createElement(W.a,{className:s.centerText},"Share match id:"),r.a.createElement(p.a,{variant:"outlined",onClick:this.copyLink},r.a.createElement(ee.a,{className:s.rotate45}),"Copy"))),r.a.createElement("div",null,r.a.createElement(p.a,{variant:"contained",disabled:4!==Object.keys(a).length,color:"primary",onClick:this.startMatch},"Start Match"))))}}]),a}(r.a.Component),ue=Object(P.a)(ie)(me),de=a(231),pe=a(178),he=function(e){Object(B.a)(a,e);var t=Object(A.a)(a);function a(e){var n;return Object(M.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(z.a)({},n.state,Object(u.a)({},e.target.name,e.target.value)))},n.handleSubmit=function(e){e.preventDefault();var t=n.state.matchId;""!==t&&n.props.history.push({pathname:"/waitingroom/".concat(t)})},n.joinRandom=Object($.a)(V.a.mark((function e(){var t;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ce({url:"/matches/joinrandom",method:"GET"});case 3:t=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("failed to create new game",e.t0);case 9:console.log(t),t.hasOwnProperty("matchID")?n.props.history.push({pathname:"/waitingroom/".concat(t.matchID)}):window.alert(t.message);case 11:case"end":return e.stop()}}),e,null,[[0,6]])}))),n.newGame=function(){var e=Object($.a)(V.a.mark((function e(t){var a,r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ce({url:"/matches/creatematch",method:"POST",body:{hostID:S().id,isPublic:t.currentTarget.dataset.id}});case 3:r=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("failed to create new game",e.t0);case 9:console.log("res form welcome ",r),a=r.matchID,n.props.history.push({pathname:"/waitingroom/".concat(a)});case 12:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),n.state={matchId:"",errorMess:""},n}return Object(T.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(n.Fragment,null,r.a.createElement(R.a,{className:"MuiPaper-customPrimary"},r.a.createElement(d.a,{variant:"h4"},"Welcome ",S().username),r.a.createElement(y.a,{container:!0,className:e.gridContainer},r.a.createElement(y.a,{item:!0},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(W.a,{className:e.centerMobile,htmlFor:"matchId"},"Join a Game:"),r.a.createElement("div",{className:e.outlined},r.a.createElement(de.a,{name:"matchId",id:"matchId",type:"text",value:this.state.matchId,onChange:this.handleChange,placeholder:"Enter Game ID",required:!0,inputProps:{"aria-label":"naked"}}),r.a.createElement(p.a,{variant:"contained",className:e.darkGray,type:"submit"},"Join Game"))),r.a.createElement(W.a,{className:e.centerText},"Or"),r.a.createElement(p.a,{variant:"contained",className:e.darkGray,onClick:this.joinRandom},"Join Random")),r.a.createElement(y.a,{item:!0,className:e.borderLeft},r.a.createElement("form",{className:e.flexCol},r.a.createElement(W.a,{className:e.centerText},"New Game:"),r.a.createElement(p.a,{variant:"outlined","data-id":"true",onClick:this.newGame},"Public"),r.a.createElement(p.a,{variant:"outlined","data-id":"false",onClick:this.newGame},"Private"))))))}}]),a}(n.Component),fe=Object(pe.a)(ie)(he),ge={RS:"red",RF:"redfield",BS:"blue",BF:"bluefield"},be=function(e){Object(B.a)(a,e);var t=Object(A.a)(a);function a(e){var n;return Object(M.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.setState(Object(u.a)({},e.target.name,e.target.value))},n.increment=function(e){n.state.num>=9||n.setState({num:parseInt(n.state.num)+1})},n.decrement=function(e){0!==n.state.num&&n.setState({num:parseInt(n.state.num)-1})},n.sendCurrentMsg=function(e){e.preventDefault();var t=n.state,a=t.num,r=t.word;""!==a&&""!==r&&(n.props.submitHint({num:a,word:r}),n.setState({num:"1",word:""}))},n.state={num:"1",word:"",chatHistory:[]},n}return Object(T.a)(a,[{key:"render",value:function(){var e=this.state,t=e.num,a=e.word,n=this.props.classes,o=this.props.chatHistory.map((function(e,t){return r.a.createElement(b.a,{className:"".concat(n.listItem," ").concat(n["listItem"+ge[e.role]]),key:"msg-".concat(t)},r.a.createElement(d.a,{variant:"subtitle2"},e.name," (",e.role,"):"),r.a.createElement(d.a,{variant:"subtitle1"},e.text))}));return r.a.createElement(R.a,{className:n.chatBox},r.a.createElement(Q.a,{className:n.chatList},o),r.a.createElement("form",{onSubmit:this.sendCurrentMsg,className:n.chatForm},r.a.createElement("div",{className:n.inputStyle},r.a.createElement(de.a,{className:n.inputBox,name:"word",value:a,onChange:this.handleChange,inputProps:{"aria-label":"naked"},placeholder:"Type here..."}),r.a.createElement("div",{className:n.inlineGrid},r.a.createElement(p.a,{disabled:this.state.num<=1,className:"".concat(n.plusMinus," MuiPaper-elevation1"),onClick:this.decrement},"-"),r.a.createElement(d.a,{className:n.numInput,variant:"h5"},t),r.a.createElement(p.a,{disabled:this.state.num>=9,className:"".concat(n.plusMinus," MuiPaper-elevation1"),onClick:this.increment},"+"))),r.a.createElement(p.a,{onClick:this.sendCurrentMsg,type:"submit",color:"primary",variant:"contained"},"Done")))}}]),a}(r.a.Component),ye=Object(pe.a)((function(e){return Object(u.a)({listItem:{flexDirection:"column","&> .MuiTypography-subtitle1":{padding:"5% 10%"}},listItemred:{alignItems:"flex-start","&> .MuiTypography-subtitle1":{backgroundColor:k,borderRadius:"0 10px 10px 10px",color:"#ffffff"}},listItemredfield:{alignItems:"flex-start","&> .MuiTypography-subtitle1":{backgroundColor:e.palette.common.gray,borderRadius:"0 10px 10px 10px"}},listItemblue:{alignItems:"flex-end","&> .MuiTypography-subtitle1":{backgroundColor:j,borderRadius:"10px 0 10px 10px",color:"#ffffff"}},listItembluefield:{alignItems:"flex-end","&> .MuiTypography-subtitle1":{backgroundColor:e.palette.common.gray,borderRadius:"10px 0 10px 10px"}},buttonInput:{width:"5%",height:"5%",boxShadow:"1px 1px 1px 1px black",marginRight:"1%",marginLeft:"1%"},chatList:{height:"60vh",overflowY:"scroll",overflowX:"scroll"},numberLabel:{width:20,appearance:"textfield"},chatBox:{width:"25vw",height:"100%",justifyContent:"center",alignContent:"center",flexWrap:"wrap"},chatForm:{margin:"5px auto",textAlign:"center",height:"20vh"},inputStyle:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-around",margin:"10px 5px"},inputBox:{width:"100px","&>input":{textAlign:"center"}},inlineGrid:{display:"inline-grid",gridTemplateColumns:"repeat(3, 1fr)",width:"60px"},numInput:{textAlign:"center"},plusMinus:{textAlign:"center",padding:"2px",minWidth:"unset",width:"1.75em",height:"1.75em"}},e.breakpoints.down("sm"),{chatList:{height:"55vh"}})}))(be),ve=a(224),xe=function(e){var t=e.words,a=e.factions,n=e.classes,o=e.clickWord,s=e.spyView;return 0===t.length?null:r.a.createElement("div",{container:!0,className:n.grid},t.map((function(e,t){var i="_"===e[0],c=i?e.slice(2):e,l="chosen".concat(e.slice(1,2));return i||(l=s&&"UNKNOWN"!=a[t]?"buttonSpy"+a[t].slice(0,1):"button"),r.a.createElement(ve.a,{key:"word-".concat(t,"-").concat(i),"data-tag":t,variant:"contained",className:"".concat(n[l]," ").concat(n.gridElement," ").concat(i?n.noHover:null),onClick:o},r.a.createElement(d.a,{variant:"h5",className:n.smallWords},c))})))},we={"Red Spy's turn":"RS","Blue Spy's turn":"BS","Red Field Operator's turn":"RF","Blue Field's turn":"BF",end:"_END"},Ee=a(225),Ie=a(228),Se=function(e){Object(B.a)(a,e);var t=Object(A.a)(a);function a(){return Object(M.a)(this,a),t.apply(this,arguments)}return Object(T.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.isOver,n=t.winner,o=t.blueScore,s=t.redScore,i={blue:{color:"#1E90FF",fontSize:"20px",fontWeight:"600",fontFamily:"Roboto"},red:{color:"#FA8072",fontSize:"20px",fontWeight:"600",fontFamily:"Roboto"},sides:{flexGrow:"1"},title:{fontSize:"30px",margin:"0px",fontFamily:"Roboto",textAlign:"center",padding:"20px 16px 0px 16px"},newGame:{padding:"0 30px"},wins:{padding:"8px 0px 0px 74px",margin:"0"},score:{margin:"0px 0px 0px 0px",padding:"0px 98px"},img:{padding:"10px 0px 0px 40px"}};return r.a.createElement(Ie.a,{"aria-labelledby":"dialog-title",open:a},r.a.createElement("div",{className:i.img},r.a.createElement("img",{alt:"icon",src:"/dialog_icon.jpg",style:i.img})),r.a.createElement(Ee.a,{id:"dialog-title"},r.a.createElement("p",{style:i.title},"Game over!")),r.a.createElement("div",{style:i.wins},r.a.createElement("p",{style:"Blue"==n?i.blue:i.red},n," wins")),r.a.createElement("div",{style:i.score},r.a.createElement("p",null,r.a.createElement("span",{style:i.blue},o," ")," :"," ",r.a.createElement("span",{style:i.red}," ",s))),r.a.createElement(p.a,{className:i.sides,variant:"contained",color:"primary",onClick:function(){e.props.history.push("/welcome"),e.props.setIsMatchInProgres(!1)}},"New Game"))}}]),a}(n.Component),Oe=Object(m.i)(Se),je=function(e){Object(B.a)(a,e);var t=Object(A.a)(a);function a(e){var n,r;return Object(M.a)(this,a),(r=t.call(this,e)).componentDidUnmount=Object($.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.socket.disconnect(!0);case 1:case"end":return e.stop()}}),e)}))),r.componentDidMount=function(){if(null==r.props.location.state)r.props.setIsMatchInProgres(!1),r.props.history.push("/waitingroom/".concat(r.props.match.params.matchId));else{var e=r.props.location.state,t=e.matchId,a=e.matchState,n=e.positions;console.log("In game positions "),console.log(n);var o,s=S().id;n.RS.userId==s?o="RS":n.RF.userId==s?o="RF":n.BS.userId==s?o="BS":n.BF.userId==s&&(o="BF"),console.log("Match State "),console.log(a),r.setState(Object(z.a)({},r.state,{userId:S().id,matchId:t,words:a.info.info.board,positionState:a.info.state,factions:a.info.info.factions,roles:Object(z.a)({},n),myRole:o}),(function(){r.socket=X()("http://localhost:3001/"),r.socket.on("updateState",r.updateStateRes),r.socket.on("needToUpdate",(function(){r.socket.emit("updateState",{matchID:r.state.matchId,userID:r.state.userId,updateToEveryone:!1})})),r.socket.emit("updateState",{matchID:r.state.matchId,userID:r.state.userId,updateToEveryone:!0}),console.log("After emit "+r.state)}))}setInterval((function(){!r.state.isOver&&r.state.secondsLeft>0&&r.setState({secondsLeft:--r.state.secondsLeft})}),1e3)},r.updateStateRes=function(e){console.log("in updateStateRes");var t=e;console.log("res ping ",t);var a=r.state,n=(a.matchId,a.userId),o=a.positionState,s=a.words,i=a.guessesLeft,c=(a.isOver,a.secondsLeft),l=a.turnId,m=a.roles,u=a.myRole,d=a.chatHistory,p=t.info,h=p.state!==o||Number(p.numGuess)!==i||d.length!==p.chatHistory.length;Object.keys(m).forEach((function(e){n===p[e].id&&(u=e),m.hasOwnProperty(e)?m[e].id!==p[e].id&&(m[e]={name:p[e].name,id:p[e].id},h=!0):m[e]={name:p[e].name,id:p[e].id}})),console.log("update state"),console.log(r.state),console.log(t);for(var f=0;f<s.length;f++)s[f].slice(0,2)!==p.info.board[f].slice(0,2)&&(h=!0,s[f]=p.info.board[f].slice(0,2)+s[f]);h&&(r.props.setBlueScore(t.blueScore),r.props.setRedScore(t.redScore),r.setState(Object(z.a)({},r.state,{words:s,positionState:p.state,guessesLeft:Number(p.numGuess),message:"",roles:m,myRole:u,Host:p.Host,chatHistory:p.chatHistory,isOver:t.isOver,winner:t.winner,secondsLeft:l!=t.turnId?60:c,turnId:t.turnId,factions:p.info.factions})))},r.clickWord=function(){var e=Object($.a)(V.a.mark((function e(t){var a,n,o,s;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.isMyTurn()&&!r.amISpy()){e.next=4;break}return e.abrupt("return");case 4:a=r.state,a.matchId,a.positionState,a.words,a.userId,n=a.myRole,a.secondsLeft,o=a.turnId,a.factions,s=t.currentTarget.dataset.tag,r.socket.emit("nextMove",{matchID:r.state.matchId,userID:r.state.userId,position:n,move:s,turnId:o});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.endFieldTurn=Object($.a)(V.a.mark((function e(){var t,a,n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.isMyTurn()&&!r.amISpy()){e.next=2;break}return e.abrupt("return");case 2:t=r.state,a=t.myRole,n=t.turnId,r.socket.emit("nextMove",{matchID:r.state.matchId,userID:r.state.userId,position:a,move:"_END",turnId:n});case 4:case"end":return e.stop()}}),e)}))),r.props.setIsMatchInProgres(!0),r.props.setBlueScore(0),r.props.setRedScore(0),r.state=(n={matchId:"",factions:[],myRole:"",userId:"",positionState:"",winner:"",turnId:"",secondsLeft:60,Host:"",guessesLeft:0,isOver:!1},Object(u.a)(n,"winner","blue"),Object(u.a)(n,"words",[]),Object(u.a)(n,"chatHistory",[]),Object(u.a)(n,"roles",{}),Object(u.a)(n,"Host",""),n),r.submitHint=r.submitHint.bind(Object(F.a)(r)),r.clickWord=r.clickWord.bind(Object(F.a)(r)),r.endFieldTurn=r.endFieldTurn.bind(Object(F.a)(r)),r.updateStateRes=r.updateStateRes.bind(Object(F.a)(r)),r.isMyTurn=r.isMyTurn.bind(Object(F.a)(r)),r.amISpy=r.amISpy.bind(Object(F.a)(r)),r.socket=void 0,r}return Object(T.a)(a,[{key:"isMyTurn",value:function(){return!!this.state.roles.hasOwnProperty(this.state.myRole)&&we[this.state.positionState]===this.state.myRole}},{key:"amISpy",value:function(){return console.log("My role is "+this.state.myRole),["RS","BS"].includes(this.state.myRole)}},{key:"submitHint",value:function(){var e=Object($.a)(V.a.mark((function e(t){var a,n,r,o,s,i,c;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("submit hint"),console.log(this.state),a=this.state,n=a.myRole,r=a.matchId,o=a.userId,s=a.turnId,a.secondsLeft,a.positionState,a.guessesLeft,!this.amISpy()){e.next=12;break}if(!this.isMyTurn()){e.next=9;break}i="".concat(t.num," ").concat(t.word),c=n,e.next=10;break;case 9:return e.abrupt("return");case 10:e.next=13;break;case 12:this.amISpy()||(i=t.word,c="_CHAT");case 13:this.socket.emit("nextMove",{matchID:r,userID:o,position:c,move:i,name:S().name,role:n,turnId:s});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){console.log("local state",this.state);var e,t=this.props,a=t.classes,n=t.setIsMatchInProgres,o=t.blueScore,s=t.redScore,i=this.state,c=i.words,l=i.factions,m=i.positionState,u=(i.matchId,i.userId,i.guessesLeft),h=i.message,f=i.isOver,g=i.winner,b=i.chatHistory,y=(i.myRole,i.secondsLeft);e=u>=0?u-1+" +1 guesses left":"0 guesses left",document.body.style.overflow="noscroll";var v=this.amISpy();return r.a.createElement("div",{className:a.matchStyle},r.a.createElement(ye,{submitHint:this.submitHint,chatHistory:b}),r.a.createElement("div",{className:"".concat(a.paper," ").concat(a.centerText)},r.a.createElement(d.a,{variant:"h4"},m," \xa0",this.isMyTurn()?"(You)":null),r.a.createElement(d.a,{variant:"body1"},["RF","BF"].includes(we[m])?e:r.a.createElement(r.a.Fragment,null,"\xa0")),""!==h?r.a.createElement("p",null,h):null,r.a.createElement("div",null,r.a.createElement(d.a,{variant:"body1"},"Time remaining: ",y)),r.a.createElement(xe,{classes:a,words:c,factions:l,clickWord:this.clickWord,spyView:v}),v?null:r.a.createElement(p.a,{variant:"contained",color:"primary",onClick:this.endFieldTurn},"End Turn")),f?r.a.createElement(Oe,{isOver:f,setIsMatchInProgres:n,winner:g,blueScore:o,redScore:s}):null)}}]),a}(n.Component),ke=Object(pe.a)((function(e){var t;return{button:{color:"#000000",backgroundColor:"#ffffff",animationName:"$zoom",animationDuration:"0.75s",animationDirection:"forward",animationTimingFunction:"ease-in-out","&:hover":{transform:"scale(1.3)"}},buttonSpyA:{color:"#000000",backgroundColor:"#ffffff"},buttonSpyB:{color:j,backgroundColor:"#ffffff"},buttonSpyR:{color:k,backgroundColor:"#ffffff"},buttonSpyC:{color:e.palette.common.darkGray,backgroundColor:"#ffffff"},chosenB:{backgroundColor:j,color:"#ffffff"},chosenR:{backgroundColor:k,color:"#ffffff"},chosenA:{backgroundColor:"#000000",color:"#ffffff"},chosenC:{backgroundColor:e.palette.common.gray,color:e.palette.common.darkGray},noHover:{"&:hover":{cursor:"initial"}},centerText:{textAlign:"center",marginBottom:"0.5em"},leftText:{textAlign:"left"},gridContainer:{flexWrap:"wrap",justifyContent:"space-around",margin:"10px auto"},standardFlex:{display:"flex",flexWrap:"wrap"},matchStyle:{display:"flex",flexDirection:"row",maxHeight:"80vh"},flexRow:{margin:"10px",justifyContent:"space-evenly"},p:{margin:"auto",textAlign:"center"},paper:Object(u.a)({width:"80%",paddingTop:"5vh",height:"80vh",justifyContent:"center",alignItems:"center",flexDirection:"column",display:"flex"},e.breakpoints.down("sm"),{paddingTop:"2vh",height:"75vh"}),".Mui-disabled":{backgroundColor:"#B319EB"},smallWords:(t={},Object(u.a)(t,e.breakpoints.down("sm"),{fontSize:"0.8rem"}),Object(u.a)(t,e.breakpoints.down("xs"),{fontSize:"0.7rem"}),t),grid:{display:"grid",gridTemplate:"repeat(5, 1fr) / repeat(5, 1fr)",width:"90%",height:"100%",maxHeight:"55vh",margin:"0 auto"},gridElement:{display:"flex",alignItems:"center",margin:"7px",borderRadius:"7px",cursor:"pointer",wordWrap:"break-word",justifyContent:"space-evenly"}}}))(je),Ce=a(114),Ne=Object(Ce.a)({typography:{fontFamily:"Roboto",fontSize:12,h4:{textAlign:"center","&:after":{content:"close-quote",borderBottom:"2px solid ".concat("#32be72"),maxWidth:"80px",display:"block",margin:"0.5em auto"}},h6:{display:"inline",cursor:"pointer"},body1:{display:"inline"}},palette:{common:{gray:"#efeeee",darkGray:"#5d5d5d"},primary:{main:"#32be72",contrastText:"#fff"},secondary:{main:"#DF1B1B"}},shape:{borderRadius:"7px"},overrides:{MuiPaper:{customPrimary:{textAlign:"center",margin:"50px auto",padding:"20px",width:"60%",maxWidth:"500px"}},MuiCard:{root:{padding:"10% 5%","&:hover":{cursor:"pointer"}}},MuiCheck:{custom:{fill:"primary"}},MuiButton:{root:{textTransform:"capitalize"},contained:{textAlign:"center",margin:"10px",padding:"10px 40px"}},MuiFormLabel:{root:{margin:"1em 0 0.5em 0",display:"block",textAlign:"left",fontWeight:"bold",color:"black",fontSize:"1em"}},MuiTextField:{root:{width:"100%",margin:"8px 0",borderRadius:"4px",boxSizing:"border-box",fontSize:"20px"}}}});var Pe=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],o=t[1],s=Object(n.useState)(0),u=Object(i.a)(s,2),d=u[0],p=u[1],h=Object(n.useState)(0),f=Object(i.a)(h,2),g=f[0],b=f[1];return r.a.createElement(c.a,{theme:Ne},r.a.createElement(l.a,null,r.a.createElement(N,{isMatchInProgres:a,setIsMatchInProgres:o,blueScore:d,redScore:g}),r.a.createElement(m.d,null,r.a.createElement(m.b,{exact:!0,path:"/signin",render:function(e){return r.a.createElement(_,Object.assign({},e,{signIn:!0}))}}),r.a.createElement(m.b,{exact:!0,path:"/signup",render:function(e){return r.a.createElement(_,Object.assign({},e,{signIn:!1}))}}),r.a.createElement(U,{exact:!0,path:"/welcome",component:fe}),r.a.createElement(U,{exact:!0,path:"/waitingroom/:matchId",component:ue}),r.a.createElement(U,{exact:!0,path:"/match/:matchId",render:function(e){return r.a.createElement(ke,Object.assign({},e,{isMatchInProgres:a,setIsMatchInProgres:o,blueScore:d,setBlueScore:p,redScore:g,setRedScore:b}))}}),r.a.createElement(m.b,{path:"/",component:_}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(Pe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},88:function(e,t,a){}},[[123,1,2]]]);
//# sourceMappingURL=main.20c6f40b.chunk.js.map